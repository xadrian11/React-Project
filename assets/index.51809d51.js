var ze=Object.defineProperty,Ye=Object.defineProperties;var Qe=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var ke=(a,t,e)=>t in a?ze(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,v=(a,t)=>{for(var e in t||(t={}))ye.call(t,e)&&ke(a,e,t[e]);if(K)for(var e of K(t))Ce.call(t,e)&&ke(a,e,t[e]);return a},C=(a,t)=>Ye(a,Qe(t));var W=(a,t)=>{var e={};for(var s in a)ye.call(a,s)&&t.indexOf(s)<0&&(e[s]=a[s]);if(a!=null&&K)for(var s of K(a))t.indexOf(s)<0&&Ce.call(a,s)&&(e[s]=a[s]);return e};import{i as Ke,g as We,U as Ze,a as Je,m as U,K as q,Q as I,D as N,u as Se,r as Z,b as xe,T as H,j as ie,c as Ge,I as Ue,s as Xe,R as qe,P as c,d,L as k,e as le,f as F,h as ce,k as Ie,N as V,l as en,F as nn,n as an,o as z,p as Le,q as de,t as tn,v as Re,w as me,H as sn,x as rn,C as on,y as ln,z as T,A as cn,B as dn}from"./vendor.24a7d275.js";const mn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}};mn();const un="team-mw-project-2",pn={apiKey:"AIzaSyC9VPhAM0lhHq03Uqg-YQvxwIsE4kyJYOQ",authDomain:"cc-insta-clone-2.firebaseapp.com",projectId:"cc-insta-clone-2",storageBucket:"cc-insta-clone-2.appspot.com",messagingSenderId:"895347235827",appId:"1:895347235827:web:a9aea4b80806cbaa415086"},ue=Ke(pn),J=We(ue),y=Ze(ue),_=Je(ue);async function L(a){const{docs:t}=await U(q(N(y,"users"),I("id","==",a))),e=t.pop().data();return C(v({},e),{avatarURL:e.avatarURL?e.avatarURL:"/team-mw-project-2/images/avatar-icon.png"})}async function D(){return await new Promise(a=>_.onIdTokenChanged(a)),_.currentUser===null?null:await L(_.currentUser.uid)}async function hn(a){const t=await L(a);if(t.following.length===0)return[];const{docs:e}=await U(q(N(y,"users"),I("id","in",t.following)));return e.map(s=>s.data())}async function fn({userId:a,undo:t=!1}){const{docs:e}=await U(q(N(y,"users"),I("id","in",[_.currentUser.uid,a]))),s=e.find(m=>m.data().id===a),r=e.find(m=>m.data().id===_.currentUser.uid),o=t?r.data().following.filter(m=>m!==a):Array.from(new Set([...r.data().following,a])),l=t?s.data().followers.filter(m=>m!==_.currentUser.uid):Array.from(new Set([...s.data().followers,_.currentUser.uid]));return await H(r.ref,{following:o}),await H(s.ref,{followers:l}),{followers:l,following:o}}async function _n({name:a,lastname:t,imgFile:e}={}){const{docs:s}=await U(q(N(y,"users"),I("id","==",_.currentUser.uid)));let r=null;const o=s.pop();if(e){const{metadata:l}=await Se(Z(J,_.currentUser.uid),e);r=await xe(Z(J,l.fullPath))}return await H(o.ref,{name:a||o.data().name,lastname:t||o.data().lastname,avatarURL:r||o.data().avatarURL}),await D()}const gn="_wrapper_1m4dd_1",wn="_loader_1m4dd_8",bn="_spin_1m4dd_1";var $e={wrapper:gn,loader:wn,spin:bn};const n=ie.exports.jsx,i=ie.exports.jsxs,j=ie.exports.Fragment,Pe=()=>n("div",{"data-testid":"loader",className:$e.wrapper,children:n("div",{className:$e.loader})});async function vn({email:a,password:t,name:e,lastname:s}){const{user:r}=await Ge(_,a,t);return await _.updateCurrentUser(r),await Ue(N(y,"users"),{name:e,email:a,lastname:s,id:r.uid,following:[],followers:[],avatarURL:null}),_.currentUser}async function Nn({email:a,password:t}){const{user:e}=await Xe(_,a,t);return await _.updateCurrentUser(e),_.currentUser}async function yn(){await _.signOut()}function Cn(a){return _.onAuthStateChanged(a)}const kn="_loadercontainer_1c0ck_1";var Sn={loadercontainer:kn};const Fe=qe.createContext(null),je=({children:a})=>{const[t,e]=d.exports.useState();function s(){D().then(r=>e(r)).catch(()=>{e(null)})}return d.exports.useEffect(()=>{s();const r=Cn(()=>{e(),s()});return()=>{r()}},[]),t===void 0?n("div",{className:Sn.loadercontainer,children:n(Pe,{})}):n(Fe.Provider,{value:t,children:a})};je.propTypes={children:c.node};function R(){return qe.useContext(Fe)}const xn="_logo_ijv1x_1",Un="_navBar_ijv1x_7",qn="_navlinks_ijv1x_15",In="_signoutbtn_ijv1x_16",Ln="_navlink_ijv1x_15",Rn="_link_ijv1x_37";var S={logo:xn,navBar:Un,navlinks:qn,signoutbtn:In,navlink:Ln,link:Rn};const $n=()=>{const a=R(),t=()=>{yn()};return i("nav",{className:S.navBar,children:[n(k,{to:"/",className:S.link,children:n("img",{className:S.logo,src:"/team-mw-project-2/images/logo-desktop.svg"})}),i("div",{className:S.navlinks,children:[a&&i(j,{children:[n(k,{className:S.navlink,to:"/",children:"Home"}),n(k,{className:S.navlink,to:"/profile",children:"Profile"}),n("button",{className:S.signoutbtn,onClick:t,children:"Sign out"})]}),!a&&i(j,{children:[n(k,{className:S.navlink,to:"/signin",children:"Sign in"}),n(k,{className:S.navlink,to:"/signup",children:"Sign up"})]})]})]})},Pn="_error_18s27_7",Fn="_appear_18s27_1",jn="_errorBorder_18s27_14",Bn="_signUpLink_18s27_36",An="_linkHeader_18s27_44",Mn="_formHeader_18s27_49";var x={error:Pn,appear:Fn,errorBorder:jn,signUpLink:Bn,linkHeader:An,formHeader:Mn};const Tn="_input_1ghr6_1";var G={input:Tn};const Dn="_form_1o8c4_1";var En={form:Dn};function pe(e){var s=e,{children:a}=s,t=W(s,["children"]);return n("form",C(v({"data-testid":"form",className:En.form},t),{children:a}))}pe.propTypes={children:c.any};const On="_submitbtn_1dh4w_1";var Hn={submitbtn:On};function he(e){var s=e,{buttonContent:a}=s,t=W(s,["buttonContent"]);return n("button",C(v({},t),{className:Hn.submitbtn,type:"submit",children:a}))}he.propTypes={buttonContent:c.string.isRequired};function X(r){var o=r,{id:a,type:t,name:e}=o,s=W(o,["id","type","name"]);return n("input",v({"data-testid":"input",className:G.input,id:a,type:t,name:e},s))}X.propTypes={id:c.any,type:c.string.isRequired,name:c.string.isRequired};const Vn="_label_2r9dk_1";var zn={label:Vn};function ee({htmlFor:a,labelContent:t}){return n("label",{"data-testid":"label",className:zn.label,htmlFor:a,children:t})}ee.propTypes={htmlFor:c.string.isRequired,labelContent:c.string.isRequired};const Yn="_formcontrol_1fvr9_1";var Qn={formcontrol:Yn};function ne(a){return n("div",{"data-testid":"form-control",className:Qn.formcontrol,children:a.children})}ne.propTypes={children:c.any};const Kn="_formContainer_2xzba_1";var Wn={formContainer:Kn};function fe({children:a}){return n("div",{className:Wn.formContainer,children:a})}fe.propTypes={children:c.node.isRequired};const Zn=le({password:F().required("Password is required"),email:F().email("Invalid email address").required("Email is required")});function Jn(){const a=R(),t=ce(),e=Ie({initialValues:{email:"",password:""},validationSchema:Zn,onSubmit:s=>{const r=s.email,o=s.password;return e.setStatus(null),Nn({email:r,password:o}).then(()=>{t("/")}).catch(()=>{e.setStatus("error")})}});return a?n(V,{to:"/"}):n(fe,{children:i(pe,{onSubmit:e.handleSubmit,children:[n("h1",{className:x.formHeader,children:" Sign In"}),e.status==="error"&&n("div",{className:x.error,children:"There was an error while submitting"}),i("div",{className:x.inputContainer,children:[i(ne,{children:[n(ee,{htmlFor:"email",labelContent:"Email"}),n(X,{id:"email",type:"email",name:"email",className:e.touched.email&&e.errors.email?`${x.errorBorder}`:`${G.input}`,placeholder:"Email",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.email}),e.touched.email&&e.errors.email?n("p",{className:x.error,children:e.errors.email}):null]}),i(ne,{children:[n(ee,{htmlFor:"password",labelContent:"Password"}),n(X,{id:"password",type:"password",name:"password",className:e.touched.password&&e.errors.password?`${x.errorBorder}`:`${G.input}`,placeholder:"Password",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.password}),e.touched.password&&e.errors.password?n("p",{className:x.error,children:e.errors.password}):null]})]}),n(he,{disabled:e.isSubmitting,buttonContent:e.isSubmitting?"Submitting":"Sign In!"}),i("h3",{className:x.linkHeader,children:["Don't have an account?"," ",n(k,{className:x.signUpLink,to:"/signup",children:"Sign up!"})]})]})})}const Gn="_form_ds6pw_1",Xn="_item_ds6pw_11",ea="_headline_ds6pw_16",na="_paragraph_ds6pw_22",aa="_flex_ds6pw_31",ta="_input_ds6pw_36",sa="_button_ds6pw_48",ra="_description_ds6pw_64",oa="_questionSign_ds6pw_71",ia="_hyperlink_ds6pw_78",la="_notificationsValid_ds6pw_83";var h={form:Gn,item:Xn,headline:ea,paragraph:na,flex:aa,input:ta,button:sa,description:ra,questionSign:oa,hyperlink:ia,notificationsValid:la};const ca=/(?=.*[a-z])/,da=/(?=.*[A-Z])/,ma=/(?=.*[0-9])/,ua=le({email:F().email("Invalid email address").required("Required").lowercase().email("Must be a valid email!"),name:F().min(3,"Too Short!").max(15,"Must be 15 characters or less").required("Required"),lastname:F().min(3,"Too Short!").max(20,"Must be 20 characters or less").required("Required"),password:F().matches(ca,"One lowercase required!").matches(da,"One uppercase required!").matches(ma,"One number required!").min(8,"Minimum 8 characters required!").required("Required"),repassword:F().oneOf([en("password")],"Password must be the same!").required("Required")});function pa(){const a=R(),t=ce();return a?n(V,{to:"/"}):n(nn,{initialValues:{email:"",name:"",lastname:"",password:"",repassword:""},validationSchema:ua,onSubmit:(e,s)=>{const r=e.email,o=e.password,l=e.name,m=e.lastname;return s.setStatus(null),vn({email:r,password:o,name:l,lastname:m}).then(()=>{t("/")}).catch(()=>{s.setStatus("error")})},children:({errors:e,touched:s})=>n(fe,{children:i(an,{className:h.form,children:[n("h2",{className:h.headline,children:"Sign Up"}),i("p",{className:h.paragraph,children:["Sign up to view ",n("br",{})," photos and videos of your friends."]}),i("div",{className:h.flex,children:[n(z,{className:h.input,type:"email",id:"femail",name:"email",placeholder:"Your email.."}),e.email&&s.email?n("div",{className:h["notifications-valid"],children:e.email}):null]}),i("div",{className:h.flex,children:[n(z,{className:h.input,type:"text",id:"fname",name:"name",placeholder:"Your firstname.."}),e.name&&s.name?n("div",{className:h["notifications-valid"],children:e.name}):null]}),i("div",{className:h.flex,children:[n(z,{className:h.input,type:"text",id:"surname",name:"lastname",placeholder:"Your lastname.."}),e.lastname&&s.lastname?n("div",{className:h.notificationsValid,children:e.lastname}):null]}),i("div",{className:h.flex,children:[n(z,{className:h.input,type:"password",id:"fpassword",name:"password",placeholder:"Your password"}),e.password&&s.password?n("div",{className:h["notifications-valid"],children:e.password}):null]}),i("div",{className:h.flex,children:[n(z,{className:h.input,type:"password",id:"reppassword",name:"repassword",placeholder:"Confirm password"}),e.repassword&&s.repassword?n("div",{className:h["notifications-valid"],children:e.repassword}):null]}),n("div",{className:h.flex,children:n("button",{type:"submit",className:h.button,children:"Next"})}),n("div",{className:h.flex,children:i("p",{className:h.questionSign,children:["Have an account",n(k,{className:h.hyperlink,to:"/signin",children:"Sign In"})]})})]})})})}const ha="_main_zbq4w_7";var _e={"profile-view-container":"_profile-view-container_zbq4w_1",main:ha,"posts-wrapper":"_posts-wrapper_zbq4w_20","post-image":"_post-image_zbq4w_27"};const fa=a=>{const t=d.exports.useMemo(()=>window.matchMedia(a),[a]),[e,s]=d.exports.useState(t.matches);return d.exports.useEffect(()=>{s(t.matches);const r=o=>s(o.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),e},_a="_closeButton_1j7vg_1",ga="_mymodal_1j7vg_18",wa="_popup_1j7vg_1",ba="_myoverlay_1j7vg_31";var ge={closeButton:_a,mymodal:ga,popup:wa,myoverlay:ba};Le.setAppElement("#root");function ae({isOpen:a,onClose:t,children:e,className:s}){return i(Le,{isOpen:a,onRequestClose:t,className:de(ge.mymodal,s),overlayClassName:ge.myoverlay,children:[e,n("button",{className:ge.closeButton,onClick:t,children:"\xD7"})]})}ae.propTypes={isOpen:c.bool.isRequired,onClose:c.func.isRequired,children:c.node.isRequired,className:c.string};const va="_wrapper_b78o4_5",Na="_avatar_b78o4_10",ya="_buttonModal_b78o4_23",Ca="_errorBorder_b78o4_53",ka="_error_b78o4_53",Sa="_modal_b78o4_70";var E={wrapper:va,avatar:Na,buttonModal:ya,errorBorder:Ca,error:ka,modal:Sa};function Be(){const a=5*1e3*1e3,t=["image/jpg","image/jpeg","image/gif","image/png"],e=Ie({initialValues:{file:null},validationSchema:le({file:tn().required("A file is required").test("fileSize","File size cannot exceed 5MB",p=>p&&p.size<=a).test("fileFormat","Unsupported Format",p=>p&&t.includes(p.type))}),onSubmit:async p=>{await _n({imgFile:p.file}),l(!1)}}),s=R(),{userId:r}=Re(),[o,l]=d.exports.useState(!1),[m,w]=d.exports.useState(s.avatarURL||"/team-mw-project-2/images/avatar-icon.png");return i("div",{className:E.wrapper,children:[n("img",{className:E.avatar,src:m,alt:"avatar","data-testid":"avatar"}),s.id===r?n("button",{className:E.buttonModal,onClick:()=>l(!0),"data-testid":"editBtn",children:"edit"}):null,n(ae,{isOpen:o,className:E.modal,onClose:()=>l(!1),children:i(pe,{onSubmit:e.handleSubmit,children:[i(ne,{children:[n(ee,{htmlFor:"file",labelContent:"Upload image"}),n(X,{"data-testid":"inputFile",id:"file",type:"file",name:"file",onChange:p=>{const u=p.target.files[0];e.setFieldValue("file",u),u.size<a&&t.includes(u.type)&&w(URL.createObjectURL(u))},className:e.touched.file&&e.errors.file?`${E.errorBorder}`:`${G.input}`}),e.touched.file&&e.errors.file?n("p",{className:E.error,children:e.errors.file}):null]}),n(he,{disabled:e.isSubmitting,buttonContent:e.isSubmitting?"Submitting":"Submit"})]})})]})}const xa="_followButton_1qkbn_1";var Ua={followButton:xa};function we({userId:a,onFollow:t}){const e=R(),[s,r]=d.exports.useState(()=>e.following.includes(a)?"Unfollow":"Follow"),[o,l]=d.exports.useState(!1);async function m(){try{const w=s==="Unfollow";l(!0);const{followers:p}=await fn({userId:a,undo:w});r(w?"Follow":"Unfollow"),t(p)}finally{l(!1)}}return a===e.id?null:n("button",{onClick:m,disabled:o,className:Ua.followButton,children:s})}we.propTypes={userId:c.string,onFollow:c.func};const qa="_header_14q4j_1";var g={"header-wrapper":"_header-wrapper_14q4j_1","avatar-and-name":"_avatar-and-name_14q4j_9","top-wrapper":"_top-wrapper_14q4j_15","user-name":"_user-name_14q4j_21","add-icon":"_add-icon_14q4j_25",header:qa,"name-and-lastname":"_name-and-lastname_14q4j_35","user-info":"_user-info_14q4j_40","main-info":"_main-info_14q4j_47","main-info-nr":"_main-info-nr_14q4j_54","main-info-label":"_main-info-label_14q4j_59"};function Ae({userEmail:a,userName:t,userLastName:e,followersNr:s,followingNr:r,userId:o,onFollow:l}){return i("div",{className:g["header-wrapper"],children:[i("div",{className:g["top-wrapper"],children:[n(we,{userId:o,onFollow:l}),n("span",{className:g["user-name"],children:a}),n("img",{className:g["add-icon"],src:"/images/add.png",alt:"add icon"})]}),i("div",{className:g.header,children:[i("div",{className:g["avatar-and-name"],children:[n(Be,{}),i("span",{className:g["name-and-lastname"],children:[t," ",e]})]}),i("div",{className:g["user-info"],children:[i("div",{className:g["main-info"],children:[n("span",{className:g["main-info-nr"],children:"0"}),n("span",{className:g["main-info-label"],children:"Posts"})]}),i("div",{className:g["main-info"],children:[n("span",{className:g["main-info-nr"],children:s}),n("span",{className:g["main-info-label"],children:"Followers"})]}),i("div",{className:g["main-info"],children:[n("span",{className:g["main-info-nr"],children:r}),n("span",{className:g["main-info-label"],children:"Following"})]})]})]})]})}Ae.propTypes={userEmail:c.string,userName:c.string,userLastName:c.string,followersNr:c.number,followingNr:c.number,userId:c.string,onFollow:c.func};const Ia="_header_q4e4a_1";var B={header:Ia,"user-info":"_user-info_q4e4a_7","user-name":"_user-name_q4e4a_14","main-info":"_main-info_q4e4a_18"};function Me({userEmail:a,userName:t,userLastName:e,followersNr:s,followingNr:r,userId:o,onFollow:l}){return i("div",{className:B.header,children:[n(Be,{}),i("div",{className:B["user-info"],children:[i("span",{className:B["user-name"],children:[a,n(we,{userId:o,onFollow:l})]}),i("div",{className:B["main-info"],children:[n("div",{className:B["posts-nr"],children:"Posts: 0"}),i("div",{className:B["followers-nr"],children:["Followers: ",s]}),i("div",{className:B["following-nr"],children:["Following: ",r]})]}),i("span",{children:[t," ",e]})]})]})}Me.propTypes={userEmail:c.string,userName:c.string,userLastName:c.string,postsNr:c.number,followersNr:c.number,followingNr:c.number,userId:c.string,onFollow:c.func};const La="_postContainer_ppiu5_8",Ra="_header_ppiu5_16",$a="_modalHeader_ppiu5_17",Pa="_userImg_ppiu5_23",Fa="_userName_ppiu5_30",ja="_postImg_ppiu5_35",Ba="_link_ppiu5_44",Aa="_btnContainer_ppiu5_51",Ma="_btn_ppiu5_51",Ta="_btnFilled_ppiu5_59",Da="_btnDisabled_ppiu5_75",Ea="_description_ppiu5_81",Oa="_userNameDesc_ppiu5_90",Ha="_likesCommentsContainer_ppiu5_96",Va="_likes_ppiu5_96",za="_comments_ppiu5_105",Ya="_modalContainer_ppiu5_112",Qa="_commentSection_ppiu5_119",Ka="_modalImg_ppiu5_128";var f={postContainer:La,header:Ra,modalHeader:$a,userImg:Pa,userName:Fa,postImg:ja,link:Ba,btnContainer:Aa,btn:Ma,btnFilled:Ta,btnDisabled:Da,description:Ea,userNameDesc:Oa,likesCommentsContainer:Ha,likes:Va,comments:za,modalContainer:Ya,commentSection:Qa,modalImg:Ka};async function Wa({description:a,imgFile:t}){const e=await D(),{metadata:s}=await Se(Z(J,me()),t),r=await xe(Z(J,s.fullPath));await Ue(N(y,"posts"),{imgURL:r,description:a,id:me(),likes:[],comments:[],author:e.id,createdAt:new Date().getTime()})}async function Za(a){const{docs:t}=await U(q(N(y,"posts"),I("id","==",a))),e=t.pop().data();let s=[];for(let r of e.comments)s.push(C(v({},r),{author:await L(e.author)}));return C(v({},e),{comments:s,author:await L(e.author)})}async function Te(a){const t=await L(a),{docs:e}=await U(q(N(y,"posts"),I("author","==",t.id)));let s=[];for(let r of e){const o=r.data();let l=[];for(let m of o.comments)l.push(C(v({},m),{author:await L(o.author)}));s.push(C(v({},o),{author:await L(o.author),comments:l}))}return s.sort((r,o)=>o.createdAt-r.createdAt)}async function Ja(){const a=await D(),t=await hn(a.id),e=[];for(let{id:s}of[].concat(a,t)){const r=await Te(s);e.push(...r)}return e.sort((s,r)=>r.createdAt-s.createdAt)}async function Ga(a,t=!1){const e=await D(),{docs:s}=await U(q(N(y,"posts"),I("id","==",a))),r=s.pop(),o=t?r.data().likes.filter(l=>l!==e.id):Array.from(new Set([...r.data().likes,e.id]));return await H(r.ref,{likes:o}),o}async function Xa({postId:a,content:t}){const e=await D(),{docs:s}=await U(q(N(y,"posts"),I("id","==",a))),r=s.pop(),o=Array.from(new Set([...r.data().comments,{content:t,id:me(),author:e.id}]));return await H(r.ref,{comments:o}),(await Za(a)).comments}const et="_commentContainer_1tfl9_1",nt="_userImg_1tfl9_9",at="_comment_1tfl9_1",tt="_commentValue_1tfl9_22",st="_input_1tfl9_26",rt="_inputContainer_1tfl9_33",ot="_userName_1tfl9_39",it="_btn_1tfl9_46";var $={commentContainer:et,userImg:nt,comment:at,commentValue:tt,input:st,inputContainer:rt,userName:ot,btn:it};function De({comments:a,isLoading:t,onAddComment:e}){const[s,r]=d.exports.useState("");return i(j,{children:[n("div",{className:$.commentContainer,children:a.map(o=>{const{author:l}=o;return i("div",{className:$.comment,children:[n("img",{src:l.avatarURL,className:$.userImg}),i("p",{className:$.commentValue,children:[i(k,{to:`/users/${l.id}`,className:$.userName,children:[l.name," ",l.lastname,":"]}),o.content]})]},o.id)})}),i("div",{className:$.inputContainer,children:[n("input",{type:"text",value:s,onChange:o=>r(o.target.value),className:$.input,placeholder:"Add new comment..."}),n("button",{type:"submit",disabled:!s.trim()||t,onClick:()=>e(s),className:$.btn,children:"Post"})]})]})}De.propTypes={comments:c.array,isLoading:c.bool,onAddComment:c.func};function be(a){const{author:t,imgURL:e,description:s,id:r}=a,o=R(),[l,m]=d.exports.useState(!1),[w,p]=d.exports.useState(!1),[u,Y]=d.exports.useState(a.likes),[A,M]=d.exports.useState(a.comments),Q=o&&u.includes(o.id);async function te(){if(!w)try{p(!0);const oe=await Ga(r,Q);Y(oe)}finally{p(!1)}}async function Ne(oe){try{p(!0);const Ve=await Xa({postId:r,content:oe});M(Ve)}finally{p(!1)}}const se=i(k,{className:f.link,to:`/users/${t.id}`,children:[t.name," ",t.lastname]}),re=i("div",{className:f.header,children:[n("img",{className:f.userImg,src:t.avatarURL}),n("p",{className:f.userName,children:se})]}),P=n("img",{onClick:()=>m(!0),className:f.postImg,src:e,alt:"Picture"}),O=i(j,{children:[n("div",{children:i("div",{className:f.btnContainer,children:[i("div",{className:f.likesCommentsContainer,children:[Q?n(sn,{onClick:te,className:de(f.btnFilled,w&&f.btnDisabled)}):n(rn,{onClick:te,className:de(f.btn,w&&f.btnDisabled)}),u.length>0&&i("p",{className:f.likes,children:[u.length," ",u.length===1?"like":"likes"]})]}),i("div",{className:f.likesCommentsContainer,children:[n(on,{onClick:()=>m(!0),className:f.btn}),A.length>0&&i("p",{className:f.comments,children:[A.length," ",A.length===1?"comment":"comments"]})]})]})}),i("p",{className:f.description,children:[n("span",{className:f.userNameDesc,children:se}),s]})]});return i(j,{children:[i("div",{className:f.postContainer,"data-testid":"post",children:[re,P,O]}),n(ae,{isOpen:l,onClose:()=>m(!1),children:i("div",{className:f.modalContainer,"data-testid":"modal",children:[n("div",{onClick:()=>m(!0),className:f.modalImg,style:{backgroundImage:`url(${e})`}}),i("div",{className:f.commentSection,children:[re,O,n(De,{comments:A,isLoading:w,onAddComment:Ne})]})]})})]})}be.propTypes={author:c.any,imgURL:c.string,description:c.string,likes:c.array,id:c.string,comments:c.array};function Ee(){const a=d.exports.useRef(!1),t=fa("(max-width: 576px)"),{userId:e}=Re(),s=ce(),[r,o]=d.exports.useState(null),[l,m]=d.exports.useState([]),w=r!==null;if(d.exports.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),d.exports.useEffect(()=>{L(e).then(u=>{a.current&&o(u)}).catch(u=>{console.log("error",u),s("/")})},[e,s]),d.exports.useEffect(()=>{Te(e).then(u=>{m(u)}).catch(u=>{console.log(u)})},[e]),!w)return n("div",{children:"Loading..."});const p=t?Ae:Me;return n("div",{className:_e["profile-view-container"],children:i("div",{className:_e.main,children:[n(p,{userEmail:r.email,userName:r.name,userLastName:r.lastname,followersNr:r.followers.length,followingNr:r.following.length,userId:r.id,onFollow:u=>o(C(v({},r),{followers:u}))}),n("div",{className:_e["posts-wrapper"],children:l.map(u=>n(be,v({},u),u.id))})]})})}Ee.propTypes={userEmail:c.string,postsNr:c.number,followersNr:c.number,followingNr:c.number};const ve=({children:a})=>R()?a:n(V,{to:"/signin"});ve.propTypes={children:c.any};const lt="_container_b5bmp_6",ct="_headline_b5bmp_14";var Oe={container:lt,headline:ct};const dt="_postsContainer_qkakg_1",mt="_addpostbutton_qkakg_7";var He={postsContainer:dt,addpostbutton:mt};const ut=()=>{const[a,t]=d.exports.useState([]),[e,s]=d.exports.useState(!1),r=()=>{s(!0)},o=()=>{s(!1)};return d.exports.useEffect(()=>{Ja().then(l=>{t(l)}).catch(l=>{console.log(l)})},[e]),{homepagePosts:a,handleModalOpen:r,handleModalClose:o,isOpen:e}},pt=()=>{const a="/team-mw-project-2/images/add-pic.png",t=d.exports.useRef(null),[e,s]=d.exports.useState("Upload pic"),[r,o]=d.exports.useState(""),[l,m]=d.exports.useState(null),[w,p]=d.exports.useState(!1),[u,Y]=d.exports.useState(""),[A,M]=d.exports.useState(!1),Q=d.exports.useMemo(()=>l?URL.createObjectURL(l):a,[l]);return{picLabel:e,imgSrc:Q,handleClick:()=>{t.current.click()},handleFileChange:P=>{const[O]=P.target.files;O&&(m(O),s("Change picture"))},handleDescriptionChange:P=>{o(P.target.value)},createPostHandler:async()=>{try{M(!0),await Wa({description:r,imgFile:l}),M(!1),p(!0),Y("Post created!")}catch(P){console.log(P),M(!1),p(!0),Y("Sorry, something went wrong")}finally{M(!1)}},description:r,myRefname:t,finalMessage:u,showFinalMessage:w,isLoading:A}},ht="_finalmessage_1bfu0_10",ft="_textarea_1bfu0_89",_t="_addpostloader_1bfu0_110";var b={"view-container":"_view-container_1bfu0_1",finalmessage:ht,"top-bar":"_top-bar_1bfu0_21","new-post-label":"_new-post-label_1bfu0_28","share-button":"_share-button_1bfu0_32","post-content-wrapper":"_post-content-wrapper_1bfu0_47","pic-wrapper":"_pic-wrapper_1bfu0_58","upload-pic-label":"_upload-pic-label_1bfu0_72","file-input":"_file-input_1bfu0_78","add-pic-icon":"_add-pic-icon_1bfu0_82","textarea-wrapper":"_textarea-wrapper_1bfu0_89",textarea:ft,addpostloader:_t};function gt(){const{picLabel:a,imgSrc:t,handleClick:e,handleFileChange:s,handleDescriptionChange:r,createPostHandler:o,description:l,myRefname:m,finalMessage:w,showFinalMessage:p,isLoading:u}=pt();return n(j,{children:u?n("div",{className:b.addpostloader,children:n(Pe,{})}):n("div",{className:b["view-container"],children:p?n("p",{className:b.finalmessage,children:w}):i("div",{children:[i("div",{className:b["top-bar"],children:[n("span",{className:b["new-post-label"],children:"New Post"}),n("button",{className:b["share-button"],onClick:o,children:"Share"})]}),i("div",{className:b["post-content-wrapper"],children:[n("input",{className:b["file-input"],ref:m,type:"file",accept:"image/*",onChange:s}),i("div",{className:b["pic-wrapper"],role:"button",onClick:e,children:[n("span",{className:b["upload-pic-label"],children:a}),n("img",{className:b["add-pic-icon"],alt:"your image",src:t})]}),n("div",{className:b["textarea-wrapper"],children:n("textarea",{className:b.textarea,rows:"10",maxLength:"2200",placeholder:"Type your post description",value:l,onChange:r})})]})]})})})}function wt(){const{homepagePosts:a,handleModalOpen:t,handleModalClose:e,isOpen:s}=ut();return i(j,{children:[n("button",{className:He.addpostbutton,onClick:t,children:"Add new post"}),n(ae,{isOpen:s,onClose:e,children:n(gt,{})}),n("div",{className:He.postsContainer,children:a.map(r=>n(be,v({},r),r.id))})]})}function bt(){const a=R();return i("div",{className:Oe.container,children:[n($n,{}),n("div",{className:Oe.viewContainer,children:i(ln,{children:[n(T,{path:"/",element:n(ve,{children:n("div",{children:n(wt,{})})})}),n(T,{path:"/signin",element:n(Jn,{})}),n(T,{path:"/signup",element:n(pa,{})}),n(T,{path:"/users/:userId",element:n(ve,{children:n(Ee,{})})}),n(T,{path:"/profile",element:n(V,{to:`/users/${a==null?void 0:a.id}`})}),n(T,{path:"*",element:n(V,{to:"/"})})]})})]})}cn.render(n(d.exports.StrictMode,{children:n(dn,{basename:un,children:n(je,{children:n(bt,{})})})}),document.getElementById("root"));
